name: Latest blog post workflow

# This workflow automatically updates the README with the latest blog posts from andywoods.me
# Runs daily at midnight UTC and can also be triggered manually

on:
  schedule:
    # Runs every day at midnight UTC (7pm EST / 4pm PST)
    - cron: '0 0 * * *'
  workflow_dispatch:  # Allows manual triggering from Actions tab

jobs:
  update-readme-with-blog:
    name: Update README with latest blog posts
    runs-on: ubuntu-latest
    permissions:
      contents: write  # Required to commit changes back to the repo

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Update README with blog posts
        uses: gautamkrishnar/blog-post-workflow@v1
        with:
          # Your blog RSS feed URL
          feed_list: "https://andywoods.me/rss.xml"

          # Maximum number of blog posts to display
          max_post_count: 5

          # Template for how each blog post appears
          # Available variables: $title, $url, $description, $date, $newline
          template: "- [$title]($url) - $date$newline"

          # Add blank line before first post for proper Markdown rendering
          insert_new_line: true

          # Date format (using dateformat library syntax)
          # This will show as: "Oct 21, 2025"
          date_format: "mmm d, yyyy"

          # Commit message when README is updated
          commit_message: "Updated with latest blog posts"

          # Committer username and email
          committer_username: "blog-post-bot"
          committer_email: "blog-post-bot@example.com"
